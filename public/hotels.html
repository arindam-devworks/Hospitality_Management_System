<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hotel Recommender</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      /* Global Styles */
      :root {
        --primary: #4361ee;
        --secondary: #3f37c9;
        --accent: #4895ef;
        --light: #f8f9fa;
        --dark: #212529;
        --success: #4cc9f0;
        --warning: #f72585;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      body {
        background-color: #f5f7fa;
        color: var(--dark);
      }

      .container {
        width: 90%;
        max-width: 1200px;
        margin: 0 auto;
      }

      .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      /* Header Styles */
      .header {
        background-color: white;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        padding: 20px 0;
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .header .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        display: flex;
        align-items: center;
        font-size: 24px;
        font-weight: 700;
        color: var(--primary);
      }

      .logo i {
        margin-right: 10px;
        font-size: 28px;
      }

      .navbar {
        display: flex;
        gap: 30px;
      }

      .navbar a {
        text-decoration: none;
        color: var(--dark);
        font-weight: 500;
        transition: color 0.3s;
      }

      .navbar a.active {
        color: var(--primary);
        font-weight: 600;
      }

      .navbar a:hover {
        color: var(--primary);
      }

      /* Search Hero Section */
      .search-hero {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        padding: 60px 0;
        text-align: center;
      }

      .search-hero h1 {
        font-size: 42px;
        margin-bottom: 15px;
      }

      .search-hero p {
        font-size: 18px;
        margin-bottom: 30px;
        opacity: 0.9;
      }

      .search-box {
        background: white;
        border-radius: 12px;
        padding: 20px;
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .search-group {
        flex: 1;
        min-width: 200px;
        position: relative;
      }

      .search-group i {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--primary);
      }

      .search-group input,
      .search-group select {
        width: 100%;
        padding: 15px 15px 15px 45px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
      }

      .search-btn {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: var(--light);
        font-weight: 600;
        font-size: 16px;
        min-width: 150px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .search-btn i {
        transition: transform 0.3s ease;
      }

      .search-btn:hover i {
        transform: scale(1.2);
      }

      .search-btn.loading .fa-search {
        display: none;
      }

      .search-btn.loading .fa-spinner {
        display: inline-block;
        animation: spin 1s linear infinite;
      }

      .search-btn .fa-spinner {
        display: none;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Filters Section */
      .filters {
        padding: 30px 0;
      }

      .filter-options {
        background: white;
        border-radius: 12px;
        padding: 20px;
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }

      .filter {
        flex: 1;
        min-width: 250px;
      }

      .filter label {
        display: block;
        margin-bottom: 10px;
        font-weight: 500;
      }

      .price-range {
        position: relative;
        margin-top: 20px;
      }

      .price-range .range-values {
        font-size: 14px;
        color: var(--dark);
        margin-bottom: 10px;
        text-align: center;
        font-weight: 500;
      }

      .range-slider {
        position: relative;
        height: 8px;
        background: #ddd;
        border-radius: 5px;
      }

      .range-track {
        position: absolute;
        height: 8px;
        background: linear-gradient(90deg, var(--primary), var(--accent));
        border-radius: 5px;
      }

      .price-range input[type="range"] {
        position: absolute;
        width: 100%;
        height: 8px;
        -webkit-appearance: none;
        appearance: none;
        background: transparent;
        pointer-events: none;
        top: 0;
      }

      .price-range input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background: var(--primary);
        border-radius: 50%;
        cursor: pointer;
        pointer-events: auto;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
      }

      .price-range input[type="range"]::-webkit-slider-thumb:hover {
        background: var(--secondary);
        transform: scale(1.2);
      }

      .star-rating {
        display: flex;
        gap: 5px;
      }

      .star {
        color: #ddd;
        cursor: pointer;
        font-size: 20px;
        transition: color 0.3s;
      }

      .star.active,
      .star:hover {
        color: #ffc107;
      }

      .amenities {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
      }

      .amenity {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      /* Hotel Results */
      .hotel-results {
        padding: 30px 0 60px;
      }

      .results-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
      }

      .results-header h2 {
        font-size: 28px;
        color: var(--dark);
      }

      .sort-options select {
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background: white;
        font-size: 16px;
      }

      .hotels-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 25px;
        margin-bottom: 40px;
      }

      .hotel-card {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s, box-shadow 0.3s;
      }

      .hotel-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      .hotel-image {
        height: 200px;
        background-size: cover;
        background-position: center;
      }

      .hotel-details {
        padding: 20px;
      }

      .hotel-details h3 {
        font-size: 20px;
        margin-bottom: 5px;
      }

      .hotel-location {
        color: #666;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .hotel-location i {
        font-size: 14px;
      }

      .hotel-rating {
        display: flex;
        align-items: center;
        gap: 5px;
        margin: 10px 0;
      }

      .hotel-rating .stars {
        color: #ffc107;
      }

      .hotel-rating .reviews {
        color: #666;
        font-size: 14px;
      }

      .hotel-price {
        font-size: 24px;
        font-weight: 600;
        color: var(--primary);
        margin: 15px 0;
      }

      .hotel-price span {
        font-size: 14px;
        font-weight: normal;
        color: #666;
      }

      .book-btn {
        width: 100%;
        padding: 12px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.3s;
      }

      .book-btn:hover {
        background: var(--secondary);
      }

      .load-more {
        text-align: center;
      }

      .load-more .btn {
        background: white;
        color: var(--primary);
        border: 1px solid var(--primary);
        padding: 12px 30px;
      }

      /* Booking Section */
      .booking-section {
        padding: 40px 0;
      }

      .booking-container {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }

      .booking-container h2 {
        font-size: 28px;
        color: var(--dark);
        margin-bottom: 20px;
      }

      .booking-list {
        display: grid;
        gap: 20px;
      }

      .booking-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        display: flex;
        flex-direction: column;
        gap: 15px;
        animation: fadeIn 0.5s ease-in-out;
      }

      .booking-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .booking-card-header h3 {
        font-size: 20px;
        color: var(--primary);
      }

      .booking-details {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }

      .booking-details p {
        color: #666;
        font-size: 14px;
      }

      .booking-details p i {
        margin-right: 8px;
        color: var(--primary);
      }

      .booking-actions {
        display: flex;
        gap: 15px;
      }

      .cancel-btn {
        background: var(--warning);
        color: white;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .cancel-btn:hover {
        background: #d61f6f;
      }

      .no-bookings {
        text-align: center;
        color: #666;
        font-size: 16px;
        padding: 20px;
      }

      /* Payment Modal */
      .payment-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }

      .payment-modal-content {
        background: var(--light);
        border-radius: 12px;
        padding: 25px;
        max-width: 500px;
        width: 90%;
        position: relative;
        animation: scaleIn 0.3s ease-in-out;
      }

      .payment-modal-content h2 {
        font-size: 24px;
        color: var(--dark);
        margin-bottom: 20px;
      }

      .close-modal {
        position: absolute;
        top: 15px;
        right: 15px;
        font-size: 24px;
        color: #666;
        cursor: pointer;
        transition: color 0.3s;
      }

      .close-modal:hover {
        color: var(--primary);
      }

      .payment-method {
        margin-bottom: 20px;
      }

      .payment-method label {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 16px;
        margin-bottom: 10px;
        cursor: pointer;
      }

      .payment-method input[type="radio"] {
        width: 20px;
        height: 20px;
        accent-color: var(--primary);
      }

      .payment-form .form-group {
        margin-bottom: 20px;
      }

      .payment-form .form-group label {
        display: block;
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 8px;
      }

      .payment-form .form-group input {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
      }

      .form-row {
        display: flex;
        gap: 15px;
      }

      .form-row .form-group {
        flex: 1;
      }

      .confirm-btn {
        width: 100%;
        background: var(--primary);
        color: white;
        padding: 15px;
        font-weight: 600;
        font-size: 16px;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.3s;
      }

      .confirm-btn:hover {
        background: var(--secondary);
      }

      .payment-note {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-top: 15px;
        color: #666;
        font-size: 14px;
      }

      .payment-note i {
        color: var(--success);
      }

      .error-message {
        color: var(--warning);
        font-size: 14px;
        margin-top: 5px;
        display: none;
      }

      /* Toast Notification */
      .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: var(--success);
        color: white;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        display: none;
        z-index: 1000;
        animation: slideIn 0.5s ease-in-out,
          fadeOut 0.5s ease-in-out 4.5s forwards;
      }

      .toast p {
        margin: 0;
        font-size: 14px;
      }

      .toast a {
        color: var(--light);
        text-decoration: underline;
        font-weight: 600;
      }

      /* Animations */
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
          display: none;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes scaleIn {
        from {
          transform: scale(0.8);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* Footer Styles */
      footer {
        background-color: var(--dark);
        color: var(--light);
        padding: 60px 0 20px;
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 30px;
        margin-bottom: 40px;
      }

      .footer-column {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .footer-column h3 {
        font-size: 20px;
        font-weight: 600;
        color: var(--accent);
        margin-bottom: 10px;
      }

      .footer-column p {
        font-size: 14px;
        line-height: 1.6;
        color: #d1d5db;
      }

      .social-links {
        display: flex;
        gap: 15px;
        margin-top: 10px;
      }

      .social-links a {
        color: var(--light);
        font-size: 18px;
        transition: color 0.3s, transform 0.3s;
      }

      .social-links a:hover {
        color: var(--success);
        transform: translateY(-2px);
      }

      .footer-column ul {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .footer-column ul li {
        font-size: 14px;
      }

      .footer-column ul li a {
        color: #d1d5db;
        text-decoration: none;
        transition: color 0.3s;
      }

      .footer-column ul li a:hover {
        color: var(--primary);
      }

      .footer-column ul li i {
        margin-right: 8px;
        color: var(--accent);
      }

      .footer-bottom {
        border-top: 1px solid #4b5563;
        padding-top: 20px;
        text-align: center;
      }

      .footer-bottom p {
        font-size: 14px;
        color: #9ca3af;
      }

      .footer-bottom a {
        color: var(--accent);
        text-decoration: none;
        transition: color 0.3s;
      }

      .footer-bottom a:hover {
        color: var(--success);
      }

      /* Responsive Styles */
      @media (max-width: 768px) {
        .navbar {
          display: none;
        }

        .mobile-menu {
          display: block;
        }

        .search-box {
          flex-direction: column;
        }

        .search-group {
          min-width: 100%;
        }

        .filter-options {
          flex-direction: column;
        }

        .hotels-grid {
          grid-template-columns: 1fr;
        }

        .booking-details {
          grid-template-columns: 1fr;
        }

        .footer-content {
          grid-template-columns: 1fr;
          text-align: center;
        }

        .social-links {
          justify-content: center;
        }

        .footer-column ul {
          align-items: center;
        }

        .toast {
          bottom: 10px;
          right: 10px;
          width: calc(100% - 20px);
        }

        .form-row {
          flex-direction: column;
        }

        .price-range {
          margin-bottom: 20px;
        }
      }

      @media (max-width: 992px) {
        .footer-content {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="container">
        <div class="logo">
          <i class="fas fa-hotel"></i>
          <span>Hospitality</span>
        </div>
        <nav class="navbar">
          <a href="homepage.html">Home</a>
          <a href="hotels.html" class="active">Hotels</a>
          <a href="#bookings">Bookings</a>
          <a href="#">About</a>
          <a href="login.html">Login</a>
        </nav>
        <!-- <div class="mobile-menu">
                <i class="fas fa-bars"></i>
            </div> -->
      </div>
    </header>

    <main class="main">
      <section class="search-hero">
        <div class="container">
          <h1>Find Your Perfect Stay</h1>
          <p>Discover hotels tailored to your preferences</p>

          <div class="search-box">
            <div class="search-group">
              <i class="fas fa-map-marker-alt"></i>
              <input
                type="text"
                id="location"
                placeholder="Where are you going?"
              />
            </div>
            <div class="search-group">
              <i class="fas fa-calendar"></i>
              <input type="date" id="checkin" placeholder="Check-in" />
            </div>
            <div class="search-group">
              <i class="fas fa-calendar"></i>
              <input type="date" id="checkout" placeholder="Check-out" />
            </div>
            <div class="search-group">
              <i class="fas fa-user"></i>
              <select id="guests">
                <option value="1">1 Guest</option>
                <option value="2">2 Guests</option>
                <option value="3">3 Guests</option>
                <option value="4">4 Guests</option>
              </select>
            </div>
            <button class="btn search-btn" id="search-btn">
              <i class="fas fa-search"></i>
              <i class="fas fa-spinner"></i>
              Search
            </button>
          </div>
        </div>
      </section>

      <section class="filters">
        <div class="container">
          <div class="filter-options">
            <div class="filter">
              <label>Price Range</label>
              <div class="price-range">
                <div class="range-values" id="range-values">₹0 - ₹41,500</div>
                <div class="range-slider">
                  <div class="range-track" id="range-track"></div>
                  <input
                    type="range"
                    min="0"
                    max="500"
                    value="0"
                    id="min-price"
                  />
                  <input
                    type="range"
                    min="0"
                    max="500"
                    value="500"
                    id="max-price"
                  />
                </div>
              </div>
            </div>
            <div class="filter">
              <label>Star Rating</label>
              <div class="star-rating">
                <span class="star" data-rating="5"
                  ><i class="fas fa-star"></i
                ></span>
                <span class="star" data-rating="4"
                  ><i class="fas fa-star"></i
                ></span>
                <span class="star" data-rating="3"
                  ><i class="fas fa-star"></i
                ></span>
                <span class="star" data-rating="2"
                  ><i class="fas fa-star"></i
                ></span>
                <span class="star" data-rating="1"
                  ><i class="fas fa-star"></i
                ></span>
              </div>
            </div>
            <div class="filter">
              <label>Amenities</label>
              <div class="amenities">
                <div class="amenity">
                  <input type="checkbox" id="wifi" checked />
                  <label for="wifi">Free WiFi</label>
                </div>
                <div class="amenity">
                  <input type="checkbox" id="pool" />
                  <label for="pool">Swimming Pool</label>
                </div>
                <div class="amenity">
                  <input type="checkbox" id="gym" />
                  <label for="gym">Gym</label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="hotel-results">
        <div class="container">
          <div class="results-header">
            <h2>Recommended Hotels</h2>
            <div class="sort-options">
              <select id="sort-by">
                <option value="recommended">Recommended</option>
                <option value="price-low">Price: Low to High</option>
                <option value="price-high">Price: High to Low</option>
                <option value="rating">Rating</option>
              </select>
            </div>
          </div>

          <div class="hotels-grid" id="hotels-container">
            <!-- Hotels will be loaded here -->
          </div>

          <div class="load-more">
            <button class="btn" id="load-more">Load More</button>
          </div>
        </div>
      </section>

      <section class="booking-section" id="bookings">
        <div class="container">
          <div class="booking-container">
            <h2>Your Bookings</h2>
            <div class="booking-list" id="booking-list">
              <!-- Booking cards will be loaded here -->
            </div>
          </div>
        </div>
      </section>
    </main>

    <div class="payment-modal" id="payment-modal">
      <div class="payment-modal-content">
        <span class="close-modal" id="close-modal">×</span>
        <h2>Payment Options</h2>
        <form class="payment-form" id="payment-form">
          <div class="payment-method">
            <label>
              <input type="radio" name="payment-method" value="card" checked />
              Pay with Card
            </label>
            <label>
              <input type="radio" name="payment-method" value="cash" />
              Cash on Booking
            </label>
          </div>
          <div class="payment-form-fields" id="payment-form-fields">
            <div class="form-group">
              <label for="cardholder">Cardholder Name</label>
              <input
                type="text"
                id="cardholder"
                placeholder="John Doe"
                required
              />
              <div class="error-message" id="cardholder-error">
                Please enter the cardholder's name.
              </div>
            </div>
            <div class="form-group">
              <label for="card-number">Card Number</label>
              <input
                type="text"
                id="card-number"
                placeholder="1234 5678 9012 3456"
                maxlength="16"
                required
              />
              <div class="error-message" id="card-number-error">
                Please enter a valid 16-digit card number.
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="expiry">Expiry Date</label>
                <input
                  type="text"
                  id="expiry"
                  placeholder="MM/YY"
                  maxlength="5"
                  required
                />
                <div class="error-message" id="expiry-error">
                  Please enter a valid expiry date (MM/YY).
                </div>
              </div>
              <div class="form-group">
                <label for="cvv">CVV</label>
                <input
                  type="text"
                  id="cvv"
                  placeholder="123"
                  maxlength="3"
                  required
                />
                <div class="error-message" id="cvv-error">
                  Please enter a valid 3-digit CVV.
                </div>
              </div>
            </div>
            <div class="payment-note" id="card-note">
              <i class="fas fa-lock"></i>
              <span>Secure Payment</span>
            </div>
          </div>
          <div class="payment-note" id="cash-note" style="display: none">
            <i class="fas fa-money-bill"></i>
            <span>Pay at the hotel upon check-in</span>
          </div>
          <button type="submit" class="btn confirm-btn">Confirm Booking</button>
        </form>
      </div>
    </div>

    <div class="toast" id="booking-toast">
      <p>Booking confirmed! <a href="#bookings">View your bookings</a></p>
    </div>

    <footer>
      <div class="container">
        <div class="footer-content">
          <div class="footer-column">
            <h3>Hospitality</h3>
            <p>
              Revolutionizing the hospitality industry with AI-powered solutions
              for hotels and guests alike.
            </p>
            <div class="social-links">
              <a href="#"><i class="fab fa-facebook-f"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-linkedin-in"></i></a>
            </div>
          </div>
          <div class="footer-column">
            <h3>Quick Links</h3>
            <ul>
              <li><a href="homepage.html">Home</a></li>
              <li><a href="#">About Us</a></li>
              <li><a href="#">Services</a></li>
              <li><a href="#">Features</a></li>
              <li><a href="#">Contact</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Services</h3>
            <ul>
              <li><a href="#">Hotel Booking</a></li>
              <li><a href="#">AI Recommendations</a></li>
              <li><a href="#">Secure Payments</a></li>
              <li><a href="#">Facial Check-in</a></li>
              <li><a href="#">Food Ordering</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Contact Us</h3>
            <ul>
              <li>
                <i class="fas fa-map-marker-alt"></i> 123 Hospitality St, Tech
                City
              </li>
              <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
              <li><i class="fas fa-envelope"></i> info@hospitalitypro.com</li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>
            © 2023 HospitalityPro. All Rights Reserved. |
            <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a>
          </p>
        </div>
      </div>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // DOM Elements
        const hotelsContainer = document.getElementById("hotels-container");
        const minPriceSlider = document.getElementById("min-price");
        const maxPriceSlider = document.getElementById("max-price");
        const rangeValues = document.getElementById("range-values");
        const rangeTrack = document.getElementById("range-track");
        const stars = document.querySelectorAll(".star");
        const wifiCheckbox = document.getElementById("wifi");
        const poolCheckbox = document.getElementById("pool"); // Fixed typo
        const gymCheckbox = document.getElementById("gym");
        const sortSelect = document.getElementById("sort-by");
        const searchBtn = document.getElementById("search-btn");
        const loadMoreBtn = document.getElementById("load-more");
        const bookingList = document.getElementById("booking-list");
        const bookingToast = document.getElementById("booking-toast");
        const paymentModal = document.getElementById("payment-modal");
        const closeModal = document.getElementById("close-modal");
        const paymentForm = document.getElementById("payment-form");
        const paymentFormFields = document.getElementById(
          "payment-form-fields"
        );
        const cardNote = document.getElementById("card-note");
        const cashNote = document.getElementById("cash-note");
        const paymentMethods = document.querySelectorAll(
          'input[name="payment-method"]'
        );

        // Initial variables
        let displayedHotels = 4;
        let filteredHotels = [];
        let selectedRating = 0;
        let bookings = [];
        let pendingBooking = null;
        const INR_CONVERSION_RATE = 83;
        const API_BASE_URL = "http://localhost:3000/api";

        // Initialize the page
        async function init() {
          updateRangeTrack();
          updateRangeValues();
          await fetchHotels();
          await fetchBookings();
          setupEventListeners();
        }

        // Update range track position
        function updateRangeTrack() {
          const min = parseInt(minPriceSlider.value);
          const max = parseInt(maxPriceSlider.value);
          const minPercent = (min / 500) * 100;
          const maxPercent = (max / 500) * 100;
          rangeTrack.style.left = `${minPercent}%`;
          rangeTrack.style.width = `${maxPercent - minPercent}%`;
        }

        // Update range values display
        function updateRangeValues() {
          const min = parseInt(minPriceSlider.value);
          const max = parseInt(maxPriceSlider.value);
          rangeValues.textContent = `₹${(
            min * INR_CONVERSION_RATE
          ).toLocaleString("en-IN")} - ₹${(
            max * INR_CONVERSION_RATE
          ).toLocaleString("en-IN")}`;
        }

        // Fetch hotels from backend
        async function fetchHotels() {
          try {
            const params = new URLSearchParams();
            params.append("minPrice", minPriceSlider.value);
            params.append("maxPrice", maxPriceSlider.value);
            // Only include rating when a rating is selected (> 0)
            if (selectedRating && selectedRating > 0) {
              params.append("rating", selectedRating);
            }
            const amenitiesStr = [
              wifiCheckbox.checked ? "wifi" : "",
              poolCheckbox.checked ? "pool" : "",
              gymCheckbox.checked ? "gym" : "",
            ]
              .filter(Boolean)
              .join(",");
            if (amenitiesStr) params.append("amenities", amenitiesStr);
            const loc = document.getElementById("location").value.trim();
            if (loc) params.append("location", loc);
            if (sortSelect.value) params.append("sortBy", sortSelect.value);

            const response = await fetch(`${API_BASE_URL}/hotels?${params}`);
            if (!response.ok) throw new Error("Failed to fetch hotels");
            filteredHotels = await response.json();
            renderHotels(filteredHotels.slice(0, displayedHotels));
            loadMoreBtn.style.display =
              filteredHotels.length > displayedHotels ? "block" : "none";
          } catch (error) {
            console.error("Error fetching hotels:", error);
            hotelsContainer.innerHTML =
              '<p class="no-results">Error loading hotels. Please try again later.</p>';
          }
        }

        // Fetch bookings from backend
        async function fetchBookings() {
          try {
            const response = await fetch(`${API_BASE_URL}/bookings`);
            if (!response.ok) throw new Error("Failed to fetch bookings");
            bookings = await response.json();
            renderBookings();
          } catch (error) {
            console.error("Error fetching bookings:", error);
            bookingList.innerHTML =
              '<p class="no-bookings">Error loading bookings. Please try again later.</p>';
          }
        }

        // Set up event listeners
        function setupEventListeners() {
          // Price range sliders
          [minPriceSlider, maxPriceSlider].forEach((slider) => {
            slider.addEventListener("input", function () {
              let min = parseInt(minPriceSlider.value);
              let max = parseInt(maxPriceSlider.value);

              if (min > max) {
                [min, max] = [max, min];
                minPriceSlider.value = min;
                maxPriceSlider.value = max;
              }

              updateRangeTrack();
              updateRangeValues();
              fetchHotels();
            });
          });

          // Star rating
          function updateFilterStars() {
            stars.forEach((s) => {
              const r = parseInt(s.getAttribute("data-rating"));
              const filled = selectedRating > 0 && r >= selectedRating;
              s.innerHTML = filled
                ? '<i class="fas fa-star"></i>'
                : '<i class="far fa-star"></i>';
              if (filled) s.classList.add("active");
              else s.classList.remove("active");
            });
          }

          stars.forEach((star) => {
            star.addEventListener("click", function () {
              const rating = parseInt(this.getAttribute("data-rating"));
              // toggle off when clicking the already-selected rating
              if (selectedRating === rating) {
                selectedRating = 0;
              } else {
                selectedRating = rating;
              }
              updateFilterStars();
              fetchHotels();
            });
          });

          // initialize visual state for filter stars
          updateFilterStars();

          // Amenities checkboxes
          [wifiCheckbox, poolCheckbox, gymCheckbox].forEach((checkbox) => {
            checkbox.addEventListener("change", fetchHotels);
          });

          // Sort select
          sortSelect.addEventListener("change", fetchHotels);

          // Search button
          searchBtn.addEventListener("click", function () {
            searchBtn.classList.add("loading");
            searchBtn.disabled = true;

            setTimeout(() => {
              searchBtn.classList.remove("loading");
              searchBtn.disabled = false;
              fetchHotels();
            }, 1000);
          });

          // Load more button
          loadMoreBtn.addEventListener("click", function () {
            displayedHotels += 4;
            renderHotels(filteredHotels.slice(0, displayedHotels));
            if (displayedHotels >= filteredHotels.length) {
              loadMoreBtn.style.display = "none";
            }
          });

          // Payment modal close
          closeModal.addEventListener("click", function () {
            paymentModal.style.display = "none";
            resetPaymentForm();
          });

          // Payment method toggle
          paymentMethods.forEach((method) => {
            method.addEventListener("change", function () {
              paymentFormFields.style.display =
                this.value === "card" ? "block" : "none";
              cardNote.style.display = this.value === "card" ? "flex" : "none";
              cashNote.style.display = this.value === "cash" ? "flex" : "none";
            });
          });

          // Payment form submission
          paymentForm.addEventListener("submit", async function (e) {
            e.preventDefault();
            const paymentMethod = document.querySelector(
              'input[name="payment-method"]:checked'
            ).value;

            if (paymentMethod === "card" && !validatePaymentForm()) {
              return;
            }

            try {
              const response = await fetch(`${API_BASE_URL}/bookings`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                  hotel_id: pendingBooking.hotel.id,
                  checkin: pendingBooking.checkin,
                  checkout: pendingBooking.checkout,
                  guests: pendingBooking.guests,
                  total: pendingBooking.total,
                  payment_method: paymentMethod,
                }),
              });

              if (!response.ok) {
                throw new Error("Failed to create booking");
              }

              const result = await response.json();
              await fetchBookings();

              // Show toast notification
              bookingToast.style.display = "block";
              setTimeout(() => (bookingToast.style.display = "none"), 5000);

              // Close modal
              paymentModal.style.display = "none";
              resetPaymentForm();
              pendingBooking = null;
            } catch (error) {
              console.error("Error creating booking:", error);
              alert("Failed to confirm booking. Please try again.");
            }
          });
        }

        // Validate payment form (for card payments)
        function validatePaymentForm() {
          const cardholder = document.getElementById("cardholder").value.trim();
          const cardNumber = document
            .getElementById("card-number")
            .value.trim();
          const expiry = document.getElementById("expiry").value.trim();
          const cvv = document.getElementById("cvv").value.trim();

          let isValid = true;
          document
            .querySelectorAll(".error-message")
            .forEach((error) => (error.style.display = "none"));

          if (!cardholder) {
            document.getElementById("cardholder-error").style.display = "block";
            isValid = false;
          }

          if (!/^\d{16}$/.test(cardNumber.replace(/\s/g, ""))) {
            document.getElementById("card-number-error").style.display =
              "block";
            isValid = false;
          }

          if (!/^\d{2}\/\d{2}$/.test(expiry)) {
            document.getElementById("expiry-error").style.display = "block";
            isValid = false;
          }

          if (!/^\d{3}$/.test(cvv)) {
            document.getElementById("cvv-error").style.display = "block";
            isValid = false;
          }

          return isValid;
        }

        // Reset payment form
        function resetPaymentForm() {
          paymentForm.reset();
          document
            .querySelectorAll(".error-message")
            .forEach((error) => (error.style.display = "none"));
          paymentFormFields.style.display = "block";
          cardNote.style.display = "flex";
          cashNote.style.display = "none";
          document.querySelector(
            'input[name="payment-method"][value="card"]'
          ).checked = true;
        }

        // Render hotels to the page
        function renderHotels(hotelsToRender) {
          if (hotelsToRender.length === 0) {
            hotelsContainer.innerHTML =
              '<p class="no-results">No hotels match your criteria. Please try different filters.</p>';
            loadMoreBtn.style.display = "none";
            return;
          }

          hotelsContainer.innerHTML = hotelsToRender
            .map(
              (hotel) => `
            <div class="hotel-card" data-id="${hotel.id}">
                <div class="hotel-image" style="background-image: url('${
                  hotel.image
                }')"></div>
                <div class="hotel-details">
                    <h3>${hotel.name}</h3>
                    <div class="hotel-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${hotel.location}</span>
                    </div>
                    <div class="hotel-rating">
                        <div class="stars">${renderStars(hotel.rating)}</div>
                        <span class="reviews">(${
                          hotel.reviews || "No"
                        } reviews)</span>
                    </div>
                    <div class="hotel-price">
                        ₹${(hotel.price * INR_CONVERSION_RATE).toLocaleString(
                          "en-IN"
                        )} <span>per night</span>
                    </div>
                    <button class="book-btn">Book Now</button>
                </div>
            </div>
        `
            )
            .join("");

          document.querySelectorAll(".book-btn").forEach((button) => {
            button.addEventListener("click", function () {
              const hotelCard = this.closest(".hotel-card");
              const hotelId = parseInt(hotelCard.getAttribute("data-id"));
              const hotel = filteredHotels.find((h) => h.id === hotelId);

              const checkin =
                document.getElementById("checkin").value ||
                new Date().toISOString().split("T")[0];
              const checkout =
                document.getElementById("checkout").value ||
                new Date(new Date().getTime() + 86400000)
                  .toISOString()
                  .split("T")[0];
              const guests = document.getElementById("guests").value || "2";
              const nights = 3; // Default 3 nights
              const total = hotel.price * nights * INR_CONVERSION_RATE;

              pendingBooking = { hotel, checkin, checkout, guests, total };
              paymentModal.style.display = "flex";
            });
          });
        }

        // Helper function to render star ratings
        function renderStars(rating) {
          let stars = "";
          const fullStars = Math.floor(rating);
          const hasHalfStar = rating % 1 >= 0.5;

          for (let i = 1; i <= 5; i++) {
            if (i <= fullStars) {
              stars += '<i class="fas fa-star"></i>';
            } else if (i === fullStars + 1 && hasHalfStar) {
              stars += '<i class="fas fa-star-half-alt"></i>';
            } else {
              stars += '<i class="far fa-star"></i>';
            }
          }
          return stars;
        }

        // Render bookings
        function renderBookings() {
          if (bookings.length === 0) {
            bookingList.innerHTML =
              '<p class="no-bookings">No bookings found.</p>';
            return;
          }

          bookingList.innerHTML = bookings
            .map(
              (booking) => `
            <div class="booking-card" data-id="${booking.id}">
                <div class="booking-card-header">
                    <h3>${booking.hotel_name}</h3>
                    <span>Status: ${booking.status}</span>
                </div>
                <div class="booking-details">
                    <p><i class="fas fa-map-marker-alt"></i>${
                      booking.hotel_location
                    }</p>
                    <p><i class="fas fa-calendar"></i>Check-in: ${
                      booking.checkin
                    }</p>
                    <p><i class="fas fa-calendar"></i>Check-out: ${
                      booking.checkout
                    }</p>
                    <p><i class="fas fa-user"></i>Guests: ${booking.guests}</p>
                    <p><i class="fas fa-rupee-sign"></i>Total: ₹${booking.total.toLocaleString(
                      "en-IN"
                    )}</p>
                </div>
                <div class="booking-actions">
                  <button class="btn cancel-btn" data-id="${
                    booking.id
                  }">Cancel Booking</button>
                  <button class="btn remove-btn" data-id="${
                    booking.id
                  }" style="background:#e53e3e;color:#fff;padding:10px 20px;border-radius:8px;">Remove</button>
                </div>
            </div>
        `
            )
            .join("");

          document.querySelectorAll(".cancel-btn").forEach((button) => {
            button.addEventListener("click", async function () {
              const bookingId = this.getAttribute("data-id");
              if (confirm("Are you sure you want to cancel this booking?")) {
                try {
                  const response = await fetch(
                    `${API_BASE_URL}/bookings/${bookingId}`,
                    { method: "DELETE" }
                  );
                  if (!response.ok) {
                    throw new Error("Failed to cancel booking");
                  }
                  await fetchBookings();
                } catch (error) {
                  console.error("Error cancelling booking:", error);
                  alert("Failed to cancel booking. Please try again.");
                }
              }
            });
          });

          // Remove (permanently delete) booking
          document.querySelectorAll(".remove-btn").forEach((button) => {
            button.addEventListener("click", async function () {
              const bookingId = this.getAttribute("data-id");
              if (
                !confirm(
                  "Permanently remove this booking? This cannot be undone."
                )
              )
                return;
              try {
                const response = await fetch(
                  `${API_BASE_URL}/bookings/${bookingId}/remove`,
                  { method: "DELETE" }
                );
                const body = await response.json().catch(() => null);
                console.log(
                  "Remove response status:",
                  response.status,
                  "body:",
                  body
                );
                if (!response.ok) {
                  const msg =
                    (body && body.error) ||
                    (body && body.message) ||
                    "Failed to remove booking";
                  throw new Error(msg);
                }
                await fetchBookings();
              } catch (err) {
                console.error("Error removing booking:", err);
                alert("Failed to remove booking: " + err.message);
              }
            });
          });
        }

        // Initialize the page
        init();
      });
    </script>
  </body>
</html>
