<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hospitality | Food & Beverage</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary: #5a67d8;
        --secondary: #7f9cf5;
        --accent: #ff6b81;
        --dark: #2d3748;
        --light: #f7fafc;
        --success: #48bb78;
        --warning: #f6e05e;
        --danger: #f56565;
        --gradient: linear-gradient(135deg, #5a67d8, #7f9cf5);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      body {
        background-color: var(--light);
        color: var(--dark);
        scroll-behavior: smooth;
      }

      .container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 20px;
      }

      header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        z-index: 1000;
      }

      .header-content {
        max-width: 1280px;
        margin: 0 auto;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }

      .logo {
        font-size: 26px;
        font-weight: 700;
        color: var(--primary);
        display: flex;
        align-items: center;
        text-decoration: none;
      }

      .logo i {
        margin-right: 10px;
        color: var(--accent);
      }

      nav ul {
        display: flex;
        list-style: none;
        margin: 0;
      }

      nav ul li {
        margin-left: 30px;
      }

      nav ul li a {
        text-decoration: none;
        color: var(--dark);
        font-weight: 500;
        font-size: 16px;
        transition: color 0.3s ease;
      }

      nav ul li a:hover,
      nav ul li a.active {
        color: var(--primary);
      }

      .btn {
        padding: 10px 20px;
        border-radius: 25px;
        border: none;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .btn-outline {
        border: 1px solid var(--primary);
        color: var(--primary);
        background: transparent;
      }

      .btn-outline:hover {
        background: var(--primary);
        color: white;
      }

      .btn-primary {
        background: var(--gradient);
        color: white;
      }

      .btn-primary:hover {
        background: linear-gradient(135deg, #4c51bf, #6b7280);
        transform: translateY(-2px);
      }

      .hamburger {
        display: none;
        font-size: 24px;
        background: none;
        border: none;
        color: var(--dark);
        cursor: pointer;
      }

      main {
        padding-top: 100px; /* Adjusted to account for fixed header height */
      }

      .section-title {
        font-size: 32px;
        font-weight: 600;
        margin-bottom: 20px;
        color: var(--dark);
        position: relative;
        display: inline-block;
      }

      .section-title::after {
        content: "";
        position: absolute;
        bottom: -8px;
        left: 0;
        width: 60px;
        height: 4px;
        background: var(--accent);
        border-radius: 2px;
      }

      /* Dashboard Cards */
      .dashboard-cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
      }

      .card:hover {
        transform: translateY(-5px);
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .card-header h3 {
        font-size: 1.1rem;
        color: var(--dark);
      }

      .card-header i {
        font-size: 1.5rem;
        color: var(--primary);
      }

      .card-body h2 {
        font-size: 2rem;
        color: var(--primary);
        margin-bottom: 5px;
      }

      .card-body p {
        color: #6c757d;
        font-size: 0.9rem;
      }

      /* Tabs Navigation */
      .tabs {
        display: flex;
        border-bottom: 1px solid #dee2e6;
        margin-bottom: 20px;
        overflow-x: auto;
        white-space: nowrap;
      }

      .tab {
        padding: 10px 20px;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        transition: all 0.3s;
      }

      .tab.active {
        border-bottom: 3px solid var(--primary);
        color: var(--primary);
        font-weight: 600;
      }

      .tab:hover:not(.active) {
        border-bottom: 3px solid var(--secondary);
      }

      /* Tab Content */
      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      /* Menu Items Grid */
      .menu-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
      }

      .menu-item {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
      }

      .menu-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
      }

      .menu-item-img {
        height: 180px;
        overflow: hidden;
        position: relative;
      }

      .menu-item-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
      }

      .menu-item:hover .menu-item-img img {
        transform: scale(1.1);
      }

      .veg-nonveg {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 5px 8px;
        border-radius: 3px;
        font-size: 0.8rem;
      }

      .menu-item-details {
        padding: 15px;
      }

      .menu-item-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .menu-item-title {
        font-weight: 600;
        font-size: 1.1rem;
      }

      .menu-item-price {
        color: var(--success);
        font-weight: 700;
      }

      .menu-item-desc {
        color: #6c757d;
        font-size: 0.9rem;
        margin-bottom: 15px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .menu-item-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .quantity-control {
        display: flex;
        align-items: center;
      }

      .quantity-btn {
        width: 30px;
        height: 30px;
        border: 1px solid #dee2e6;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s;
      }

      .quantity-btn:hover {
        background: var(--light);
      }

      .quantity {
        margin: 0 10px;
        font-weight: 600;
      }

      .add-to-cart {
        background: var(--primary);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
      }

      .add-to-cart:hover {
        background: var(--secondary);
      }

      /* Order Summary */
      .order-summary {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-top: 30px;
      }

      .order-summary h2 {
        margin-bottom: 20px;
        color: var(--primary);
      }

      .order-items {
        margin-bottom: 20px;
      }

      .order-item {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid #eee;
      }

      .order-item:last-child {
        border-bottom: none;
      }

      .order-item-name {
        font-weight: 500;
      }

      .order-item-price {
        font-weight: 600;
      }

      .order-total {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #eee;
        font-size: 1.1rem;
        font-weight: 700;
      }

      .checkout-btn {
        width: 100%;
        background: var(--success);
        color: white;
        border: none;
        padding: 12px;
        border-radius: 5px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 20px;
      }

      .checkout-btn:hover {
        background: #00a884;
      }

      /* Room Service Form */
      .room-service-form,
      .reservation-form {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
      }

      .form-control {
        width: 100%;
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
      }

      .form-control:focus {
        outline: none;
        border-color: var(--primary);
      }

      .submit-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 5px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
      }

      .submit-btn:hover {
        background: var(--secondary);
      }

      /* Payment Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }

      .modal-content {
        background: white;
        border-radius: 10px;
        width: 90%;
        max-width: 500px;
        padding: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        animation: modalFadeIn 0.3s;
      }

      @keyframes modalFadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .modal-header h2 {
        color: var(--primary);
      }

      .close-modal {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #6c757d;
      }

      .payment-methods {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 20px;
      }

      .payment-method {
        display: flex;
        align-items: center;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .payment-method:hover {
        border-color: var(--primary);
      }

      .payment-method.selected {
        border-color: var(--primary);
        background-color: rgba(90, 103, 216, 0.1);
      }

      .payment-method i {
        font-size: 1.5rem;
        margin-right: 15px;
        color: var(--primary);
      }

      .payment-method .method-info h4 {
        margin-bottom: 5px;
      }

      .payment-method .method-info p {
        color: #6c757d;
        font-size: 0.9rem;
      }

      .pay-now-btn {
        width: 100%;
        background: var(--success);
        color: white;
        border: none;
        padding: 12px;
        border-radius: 5px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
      }

      .pay-now-btn:hover {
        background: #00a884;
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .dashboard-cards {
          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        }

        .menu-grid {
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 15px;
        }

        .dashboard-cards {
          grid-template-columns: 1fr;
        }

        .menu-grid {
          grid-template-columns: 1fr;
        }

        nav ul {
          display: none;
          flex-direction: column;
          position: absolute;
          top: 70px;
          left: 0;
          width: 100%;
          background: white;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          padding: 20px;
        }

        nav ul.active {
          display: flex;
        }

        nav ul li {
          margin: 10px 0;
        }

        .hamburger {
          display: block;
        }

        .section-title {
          font-size: 28px;
        }

        .modal-content {
          width: 95%;
          padding: 20px;
        }
      }

      @media (max-width: 480px) {
        .logo {
          font-size: 20px;
        }

        .section-title {
          font-size: 24px;
        }

        .card-body h2 {
          font-size: 1.5rem;
        }

        .menu-item-img {
          height: 150px;
        }

        .form-control {
          font-size: 0.9rem;
        }

        .btn,
        .submit-btn,
        .checkout-btn,
        .pay-now-btn {
          font-size: 0.9rem;
          padding: 10px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-content">
        <a href="#" class="logo">
          <i class="fas fa-hotel"></i>
          <span>Hospitality</span>
        </a>
        <nav>
          <ul class="nav-links">
            <li><a href="homepage.html">Home</a></li>
            <li><a href="hotels.html">Hotels</a></li>
            <!-- <li><a href="checkIn.html">Check-in/out</a></li> -->
            <li><a href="food&beverage.html" class="active">Food&Beverage</a></li>
            <!-- <li><a href="#" aria-label="About">About</a></li> -->
          </ul>
        </nav>
        <div class="auth-buttons" id="auth-buttons">
          <a href="login.html" class="btn btn-outline">Login</a>
          <!-- <a href="signup.html" class="btn btn-primary">Sign Up</a> -->
        </div>
        <div class="user-info" id="user-info" style="display:none;"></div>
        <button class="hamburger">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </header>

    <main>
      <div class="container">
        <!-- Dashboard Cards -->
        <div class="dashboard-cards">
          <div class="card">
            <div class="card-header">
              <h3>Today's Orders</h3>
              <i class="fas fa-shopping-cart"></i>
            </div>
            <div class="card-body">
              <h2>47</h2>
              <p>+12% from yesterday</p>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3>Revenue</h3>
              <i class="fas fa-dollar-sign"></i>
            </div>
            <div class="card-body">
              <h2>₹12,450</h2>
              <p>+8% from yesterday</p>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <h3>Active Orders</h3>
              <i class="fas fa-concierge-bell"></i>
            </div>
            <div class="card-body">
              <h2>12</h2>
              <p>Currently being prepared</p>
            </div>
          </div>
        </div>

        <!-- Digital Menu Tab Content -->
        <div class="tab-content active" id="digital-menu">
          <h2 class="section-title">Digital Menu</h2>

          <div class="tabs">
            <div class="tab active" data-category="all">All Items</div>
            <div class="tab" data-category="starters">Starters</div>
            <div class="tab" data-category="main-course">Main Course</div>
            <div class="tab" data-category="desserts">Desserts</div>
            <div class="tab" data-category="beverages">Beverages</div>
          </div>

          <div class="menu-grid" id="menu-container">
            <!-- Menu items will be dynamically inserted here -->
          </div>

          <div class="order-summary">
            <h2>Order Summary</h2>
            <div class="order-items" id="order-items">
              <div class="empty-cart">
                <p>Your cart is empty</p>
              </div>
            </div>
            <div class="order-total">
              <span>Total:</span>
              <span id="order-total">₹0.00</span>
            </div>
            <button class="checkout-btn" id="checkout-btn">
              Proceed to Order
            </button>
          </div>
        </div>

        <!-- Room Service Tab Content -->
        <div class="tab-content" id="room-service">
          <h2 class="section-title">Room Service Management</h2>

          <div class="room-service-form">
            <div class="form-group">
              <label for="room-number">Room Number</label>
              <input
                type="text"
                id="room-number"
                class="form-control"
                placeholder="Enter room number"
              />
            </div>
            <div class="form-group">
              <label for="guest-name">Guest Name</label>
              <input
                type="text"
                id="guest-name"
                class="form-control"
                placeholder="Enter guest name"
              />
            </div>
            <div class="form-group">
              <label for="service-type">Service Type</label>
              <select id="service-type" class="form-control">
                <option value="">Select service type</option>
                <option value="breakfast">Breakfast</option>
                <option value="lunch">Lunch</option>
                <option value="dinner">Dinner</option>
                <option value="snacks">Snacks</option>
                <option value="beverages">Beverages</option>
              </select>
            </div>
            <div class="form-group">
              <label for="special-requests">Special Requests</label>
              <textarea
                id="special-requests"
                class="form-control"
                rows="3"
                placeholder="Any special requests?"
              ></textarea>
            </div>
            <button class="submit-btn">Submit Request</button>
          </div>

          <div class="active-requests" style="margin-top: 30px">
            <h3>Active Room Service Requests</h3>
            <div id="room-service-requests">
              <p>No active requests at the moment</p>
            </div>
          </div>
        </div>

        <!-- Reservations Tab Content -->
        <div class="tab-content" id="reservations">
          <h2 class="section-title">Book a Reservation</h2>

          <div class="reservation-form">
            <div class="form-group">
              <label for="reservation-name">Name</label>
              <input
                type="text"
                id="reservation-name"
                class="form-control"
                placeholder="Enter your name"
              />
            </div>
            <div class="form-group">
              <label for="reservation-date">Date</label>
              <input type="date" id="reservation-date" class="form-control" />
            </div>
            <div class="form-group">
              <label for="reservation-time">Time</label>
              <input
                type="time"
                id="reservation-time"
                class="form-control"
              />
            </div>
            <div class="form-group">
              <label for="party-size">Party Size</label>
              <input
                type="number"
                id="party-size"
                class="form-control"
                placeholder="Number of guests"
                min="1"
              />
            </div>
            <div class="form-group">
              <label for="reservation-contact">Contact Number</label>
              <input
                type="tel"
                id="reservation-contact"
                class="form-control"
                placeholder="Enter contact number"
              />
            </div>
            <div class="form-group">
              <label for="reservation-requests">Special Requests</label>
              <textarea
                id="reservation-requests"
                class="form-control"
                rows="3"
                placeholder="Any special requests?"
              ></textarea>
            </div>
            <button class="submit-btn" id="reservation-submit">
              Submit Reservation
            </button>
          </div>

          <div class="active-reservations" style="margin-top: 30px">
            <h3>Active Reservations</h3>
            <div id="reservation-requests">
              <p>No active reservations at the moment</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Payment Modal -->
    <div class="modal" id="payment-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Payment Method</h2>
          <button class="close-modal">×</button>
        </div>
        <div class="payment-methods">
          <div class="payment-method selected">
            <i class="fas fa-money-bill-wave"></i>
            <div class="method-info">
              <h4>Cash on Delivery</h4>
              <p>Pay when your order arrives</p>
            </div>
          </div>
        </div>
        <button class="pay-now-btn" id="pay-now-btn">Confirm Order</button>
      </div>
    </div>

    <script>
      // Shopping cart
      let cart = [];
      let roomServiceRequests = [];
      let reservations = [];

      // DOM Elements
      const menuContainer = document.getElementById("menu-container");
      const orderItems = document.getElementById("order-items");
      const orderTotal = document.getElementById("order-total");
      const checkoutBtn = document.getElementById("checkout-btn");
      const paymentModal = document.getElementById("payment-modal");
      const closeModal = document.querySelector(".close-modal");
      const payNowBtn = document.getElementById("pay-now-btn");
      const tabs = document.querySelectorAll(".tab");
      const navLinks = document.querySelectorAll("nav ul li a");
      const tabContents = document.querySelectorAll(".tab-content");
      const roomServiceForm = document.querySelector(".room-service-form");
      const reservationForm = document.querySelector(".reservation-form");
      const roomServiceRequestsContainer = document.getElementById(
        "room-service-requests"
      );
      const reservationRequestsContainer = document.getElementById(
        "reservation-requests"
      );
      const hamburger = document.querySelector(".hamburger");
      const nav = document.querySelector("nav ul");

      // Initialize the page
      async function init() {
        await fetchMenuItems();
        setupEventListeners();
      }

      // Fetch menu items from backend
      async function fetchMenuItems() {
        try {
          const response = await fetch("http://localhost:3000/api/menu");
          const menuItems = await response.json();
          console.log("Menu items:", menuItems); // Debug log
          renderMenuItems(menuItems, "all");
        } catch (error) {
          console.error("Error fetching menu items:", error);
          alert("Failed to load menu items. Please try again later.");
        }
      }

      // Render menu items based on category
      function renderMenuItems(menuItems, category) {
        menuContainer.innerHTML = "";

        const filteredItems =
          category === "all"
            ? menuItems
            : menuItems.filter((item) => item.category === category);

        filteredItems.forEach((item) => {
          const menuItem = document.createElement("div");
          menuItem.className = "menu-item";
          menuItem.dataset.id = item.id;
          menuItem.innerHTML = `
            <div class="menu-item-img">
                <img src="${item.image}" alt="${item.name}">
                <div class="veg-nonveg ${item.veg ? "veg" : "nonveg"}">
                    ${item.veg ? "V" : "NV"}
                </div>
            </div>
            <div class="menu-item-details">
                <div class="menu-item-header">
                    <div class="menu-item-title">${item.name}</div>
                    <div class="menu-item-price">₹${parseFloat(
                      item.price
                    ).toFixed(2)}</div>
                </div>
                <div class="menu-item-desc">${item.description}</div>
                <div class="menu-item-actions">
                    <div class="quantity-control">
                        <button class="quantity-btn minus">-</button>
                        <span class="quantity">1</span>
                        <button class="quantity-btn plus">+</button>
                    </div>
                    <button class="add-to-cart">Add to Cart</button>
                </div>
            </div>
        `;
          menuContainer.appendChild(menuItem);
        });
      }
      // Update the cart display
      function updateCart() {
        orderItems.innerHTML = "";

        if (cart.length === 0) {
          orderItems.innerHTML =
            '<div class="empty-cart"><p>Your cart is empty</p></div>';
          orderTotal.textContent = "₹0.00";
          checkoutBtn.disabled = true;
          return;
        }

        let total = 0;

        cart.forEach((item) => {
          const cartItem = document.createElement("div");
          cartItem.className = "order-item";
          cartItem.innerHTML = `
                    <div class="order-item-name">${item.name} x${
            item.quantity
          }</div>
                    <div class="order-item-price">₹${(
                      item.price * item.quantity
                    ).toFixed(2)}</div>
                `;
          orderItems.appendChild(cartItem);

          total += item.price * item.quantity;
        });

        orderTotal.textContent = `₹${total.toFixed(2)}`;
        checkoutBtn.disabled = false;
      }

      // Add item to cart
      function addToCart(itemId, quantity) {
        const menuItem = cart.find((item) => item.id === itemId);

        if (menuItem) {
          menuItem.quantity += quantity;
        } else {
          fetch(`http://localhost:3000/api/menu/${itemId}`)
            .then((response) => response.json())
            .then((menuItem) => {
              cart.push({
                id: menuItem.id,
                name: menuItem.name,
                price: menuItem.price,
                quantity: quantity,
              });
              updateCart();
            });
        }

        updateCart();
      }

      // Submit order
      async function submitOrder() {
        try {
          const response = await fetch("http://localhost:3000/api/orders", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              items: cart,
              total: parseFloat(orderTotal.textContent.replace("₹", "")),
              payment_method: "Cash on Delivery",
              status: "Pending",
            }),
          });

          if (response.ok) {
            alert("Order placed successfully! You will pay cash on delivery.");
            cart = [];
            updateCart();
            paymentModal.style.display = "none";
          } else {
            alert("Failed to place order. Please try again.");
          }
        } catch (error) {
          console.error("Error submitting order:", error);
          alert("An error occurred. Please try again later.");
        }
      }

      // Submit room service request
      async function submitRoomServiceRequest(e) {
        e.preventDefault();

        const roomNumber = document.getElementById("room-number").value;
        const guestName = document.getElementById("guest-name").value;
        const serviceType = document.getElementById("service-type").value;
        const specialRequests =
          document.getElementById("special-requests").value;

        if (!roomNumber || !guestName || !serviceType) {
          alert("Please fill in all required fields");
          return;
        }

        try {
          const response = await fetch(
            "http://localhost:3000/api/room-service",
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                room_number: roomNumber,
                guest_name: guestName,
                service_type: serviceType,
                special_requests: specialRequests,
                status: "Pending",
              }),
            }
          );

          if (response.ok) {
            const request = await response.json();
            roomServiceRequests.push(request);
            updateRoomServiceRequests();
            roomServiceForm.reset();
            alert("Room service request submitted successfully!");
          } else {
            alert("Failed to submit request. Please try again.");
          }
        } catch (error) {
          console.error("Error submitting room service request:", error);
          alert("An error occurred. Please try again later.");
        }
      }

      // Submit reservation
      async function submitReservation(e) {
        e.preventDefault();

        const name = document.getElementById("reservation-name").value;
        const date = document.getElementById("reservation-date").value;
        const time = document.getElementById("reservation-time").value;
        const partySize = document.getElementById("party-size").value;
        const contact = document.getElementById("reservation-contact").value;
        const specialRequests = document.getElementById(
          "reservation-requests"
        ).value;

        if (!name || !date || !time || !partySize || !contact) {
          alert("Please fill in all required fields");
          return;
        }

        try {
          const response = await fetch(
            "http://localhost:3000/api/reservations",
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                name,
                date,
                time,
                party_size: parseInt(partySize),
                contact,
                special_requests: specialRequests,
                status: "Pending",
              }),
            }
          );

          if (response.ok) {
            const reservation = await response.json();
            reservations.push(reservation);
            updateReservations();
            reservationForm.reset();
            alert("Reservation submitted successfully!");
          } else {
            alert("Failed to submit reservation. Please try again.");
          }
        } catch (error) {
          console.error("Error submitting reservation:", error);
          alert("An error occurred. Please try again later.");
        }
      }

      // Update room service requests display
      function updateRoomServiceRequests() {
        if (roomServiceRequests.length === 0) {
          roomServiceRequestsContainer.innerHTML =
            "<p>No active requests at the moment</p>";
          return;
        }

        let html =
          '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse;">';
        html += `
                <thead>
                    <tr style="background-color: #f8f9fa;">
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Room No.</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Guest Name</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Service Type</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Time</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Status</th>
                    </tr>
                </thead>
                <tbody>
            `;

        roomServiceRequests.forEach((request) => {
          html += `
                    <tr style="border-bottom: 1px solid #ddd;">
                        <td style="padding: 12px;">${request.room_number}</td>
                        <td style="padding: 12px;">${request.guest_name}</td>
                        <td style="padding: 12px;">${request.service_type}</td>
                        <td style="padding: 12px;">${new Date(
                          request.created_at
                        ).toLocaleTimeString()}</td>
                        <td style="padding: 12px;">
                            <span style="padding: 4px 8px; border-radius: 4px; background-color: ${
                              request.status === "Pending"
                                ? "#f6e05e"
                                : "#48bb78"
                            }; color: ${
            request.status === "Pending" ? "#744210" : "#22543d"
          };">
                                ${request.status}
                            </span>
                        </td>
                    </tr>
                `;
        });

        html += "</tbody></table></div>";
        roomServiceRequestsContainer.innerHTML = html;
      }

      // Update reservations display
      function updateReservations() {
        if (reservations.length === 0) {
          reservationRequestsContainer.innerHTML =
            "<p>No active reservations at the moment</p>";
          return;
        }

        let html =
          '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse;">';
        html += `
                <thead>
                    <tr style="background-color: #f8f9fa;">
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Name</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Date</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Time</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Party Size</th>
                        <th style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">Status</th>
                    </tr>
                </thead>
                <tbody>
            `;

        reservations.forEach((reservation) => {
          html += `
                    <tr style="border-bottom: 1px solid #ddd;">
                        <td style="padding: 12px;">${reservation.name}</td>
                        <td style="padding: 12px;">${reservation.date}</td>
                        <td style="padding: 12px;">${reservation.time}</td>
                        <td style="padding: 12px;">${
                          reservation.party_size
                        }</td>
                        <td style="padding: 12px;">
                            <span style="padding: 4px 8px; border-radius: 4px; background-color: ${
                              reservation.status === "Pending"
                                ? "#f6e05e"
                                : "#48bb78"
                            }; color: ${
            reservation.status === "Pending" ? "#744210" : "#22543d"
          };">
                                ${reservation.status}
                            </span>
                        </td>
                    </tr>
                `;
        });

        html += "</tbody></table></div>";
        reservationRequestsContainer.innerHTML = html;
      }

      // Setup event listeners
      function setupEventListeners() {
        // Tab switching
        tabs.forEach((tab) => {
          tab.addEventListener("click", async () => {
            tabs.forEach((t) => t.classList.remove("active"));
            tab.classList.add("active");

            const category = tab.dataset.category;
            if (category) {
              const response = await fetch("http://localhost:3000/api/menu");
              const menuItems = await response.json();
              renderMenuItems(menuItems, category);
            }
          });
        });

        // Navigation tab switching
        navLinks.forEach((link) => {
          link.addEventListener("click", (e) => {
            if (link.dataset.tab) {
              e.preventDefault();
              navLinks.forEach((l) => l.classList.remove("active"));
              link.classList.add("active");

              const tabId = link.dataset.tab;
              tabContents.forEach((content) =>
                content.classList.remove("active")
              );
              document.getElementById(tabId).classList.add("active");
            }
          });
        });

        // Menu grid events (delegated)
        menuContainer.addEventListener("click", (e) => {
          const menuItem = e.target.closest(".menu-item");
          if (!menuItem) return;

          const itemId = parseInt(menuItem.dataset.id);

          // Handle quantity buttons
          if (e.target.classList.contains("quantity-btn")) {
            const quantityElement = menuItem.querySelector(".quantity");
            let quantity = parseInt(quantityElement.textContent);

            if (e.target.classList.contains("minus") && quantity > 1) {
              quantity--;
            } else if (e.target.classList.contains("plus")) {
              quantity++;
            }

            quantityElement.textContent = quantity;
          }

          // Handle add to cart button
          if (e.target.classList.contains("add-to-cart")) {
            const quantity = parseInt(
              menuItem.querySelector(".quantity").textContent
            );
            addToCart(itemId, quantity);

            // Show feedback
            const btn = e.target;
            btn.textContent = "Added!";
            setTimeout(() => {
              btn.textContent = "Add to Cart";
            }, 1000);
          }
        });

        // Checkout button
        checkoutBtn.addEventListener("click", () => {
          paymentModal.style.display = "flex";
        });

        // Payment modal
        closeModal.addEventListener("click", () => {
          paymentModal.style.display = "none";
        });

        // Confirm order
        payNowBtn.addEventListener("click", submitOrder);

        // Close modal when clicking outside
        window.addEventListener("click", (e) => {
          if (e.target === paymentModal) {
            paymentModal.style.display = "none";
          }
        });

        // Room service form submission
        roomServiceForm.addEventListener("submit", submitRoomServiceRequest);

        // Reservation form submission
        reservationForm.addEventListener("submit", submitReservation);

        // Hamburger menu toggle
        hamburger.addEventListener("click", () => {
          nav.classList.toggle("active");
        });
      }

      // Initialize the application
      document.addEventListener("DOMContentLoaded", init);

      // User authentication and activity display
      const user = JSON.parse(localStorage.getItem('user'));
      const authButtons = document.getElementById('auth-buttons');
      const userInfo = document.getElementById('user-info');
      if (user) {
        authButtons.style.display = 'none';
        userInfo.style.display = 'block';
        userInfo.innerHTML = `<span>Welcome, ${user.fullname || user.email}</span> <a href="#" id="logout" class="btn btn-outline" style="margin-left:10px;">Logout</a>`;
        document.getElementById('logout').onclick = function() {
          localStorage.removeItem('user');
          window.location.reload();
        };
        // Show user-specific orders/reservations (for demo, just show a message)
        document.querySelector('.order-summary').innerHTML += '<div style="margin-top:20px;"><strong>Your recent orders will appear here.</strong></div>';
      } else {
        authButtons.style.display = 'block';
        userInfo.style.display = 'none';
      }
    </script>
  </body>
</html>